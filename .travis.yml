
language: java
jdk:
  - openjdk7
  - oraclejdk7
  - oraclejdk8

# whitelist
branches:
  only:
    - master

env:
  global:
    - secure: "UvDbfv3TciDjt0mWgUxYsuI+PsQiTBzmG3puUCbIFwb7AfnGXwJvKC21Tyo5/ZwgQ768QtbMDbYYm/JOhcwnyzTLEZcdgmfONzWRKP7NNPzaN6kvSsCRwACd0SgYUOusMSoJ76Pugut1Dr9hw33TY/Nv+Bm+QZL/ecaa76WwavE="
    - secure: "An9favJXj9Y34/dZmOF1Vkv3A3NOmegCfH52ub6O/ocVnUKzUZtx0/pW0aa+gz33XWKqRDjjXrnFtbh86CB8KIYzf5nsKxp6CpSPJOJBt3GTcDASj9sn0EcwmfTgSf3jEQ3sUe47uw8LqQEyRQ/BDxSOZDOGuAeqBmR48BSdN5g="

install:
  - sudo apt-get update -qq
  - git clone --depth=50 --branch=master git://github.com/GraphWalker/graphwalker-project.git ../graphwalker-project
  - ../graphwalker-project/tools/clone.sh

script:
  - ../graphwalker-project/tools/build.sh
  - '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && mvn -q deploy --settings ../graphwalker-project/deploy.xml || false'