language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
branches:
  only:
  - master
  - coverity_scan
env:
  global:
  - secure: NleX7IcOJ4Vwt4VLkXskUsHUVHt/tMtSw+l/tKfhievZ6Ddtyo+bgSXaWz9sCysYGKycOik84rerUEXwc4eG5sWavwNYudG7/FfWxvU80Dvbztzjb34TmLSA6bOwcYPKt3UC6Aa9vH1RvMDeITU6ravdxXSr3jpIYqaWAd9h2CI=
  - secure: fETdgm1lQXxABK+pnhOk/YRSjlmpUbv64Fp4TBhE2sGNR0EM6xMkKDWO2WrtXWIgGPLt7EIBujkI4pntPTrp59NSkkuAOLiZtfn3vr25FCuercHq99St9BtSFSksYPUnOpnQTCndIAseeA0jFszoR4Swbv3HjIhD3bH9oTlrzKE=
  - secure: UGWyiUB7ji6bNkCywhexy7sErFE9X4YUgZFiTDBxba+P7Czsipj4NHvXCum3v53n5OO7WJ0WVKRTUXLgVmH5aJW3YhLo7zmoW7zlChD5xxHY55s3EEQzYfWNF9IJURgbzt5TzhPi6RROnOiDoUqKZBY8BepaT/fguWNACuJ5+5g=
  - secure: kAoyo3bZieOUeireJhXXZfigkvRBGIMnebRdcFqMdYWdzL5y3LQfcrnIBjxX83Ehfhmn61cp5U4EUDGIw08GXAg9vSV+hXmCI4nDuGh8mJtgEQ7piAoLk0iav7RLGRNtlT8I3Y3F4PEjv2FbmZ0QGCwQ6EexfNlmniH6o0lS1NmT1AWZim0+yd1PiwO/9F6WV42QB59sqijtOxBtr/jBWSP+nuwVQ85JdsdLUL7eRU71cpZyalpLUvr8VvNc54NivSXhyIIXA8MjdeVH543g8alFg/XvzzzO39nUgE6eWEhifUsLF3b4CPHKN/12wVUBn3l5LGIXn/nwDLbA3KAvSaVaoqq1MC7tkl1nQgHzVjSJiKvdcoc9qhvOSwGwbIjL/mW0AYNwfRJFPY3geuxnl9oGS33QC89NlFwP4xfAS6mLqhWXFjxAwx6TJerfFsmDSHjSnTMHnuHbnoaiNU5pF7gpYBStp/mxvgjQFjwIE1Xh2q1tOzeOOoE5Q+s80c8RAHV+k4XCfVAOFRpgHoY6Oya7LSri0Lsw9rgW6lNGpCbHTYZJBToPYDJbDBipmZHN0ioi21I1Iq89XyxfL696+CWoP/6d5qY8/+c48M8q4mMRW13GOZjlib0nkvEjgZ6QYTxGnvUzgIcLtXLhYbVZ0M9Jf06QaxnFr1uKSto7/38=
  - secure: s3qK+35XdxKCUM7vDD55QlH3QJLuMvtSv8y+XTL2bOIbcgxBIUlpEM3yAduiMd+jt8evgzdCMZbN0Qd0Zi7sxUGqtLfoWH+68ICfgk52NNCFKonP6kV/fDEoE65ORc5Rnv8HJekFpBa3NkYjMGVE+lDV3CAFmawPJj3aufCeZreDXRetOM/KpsQiv1DatBAcW1ri7lYRjTDu7rwGvIyV010wMnwbZD9hls4gney/35vCFOMWuXpFLSmAeDwDaLUED7ayINRU135XTY/Pu8UUvwEDbnpjS0qOBWaherdZFg8mYVTZKb85RAfPSzTVGqoG1scFBfUqn0bdL2OVaFXwIY4XPdq5JWsusWvjI9JpcJDCqVml2bTLMtqpAXTW4wdo/Be27S/ozk4VuX89dN/MOo/lHRnRPAJHW3v9kP8bfcXgC3QljLRXMyPudQLZIB/0WCGLsCk2oolTASmccY7YaueHxzwcdQ1Y8A2BE8+ehSZwwGKrll4pq8m9ZM8IYC+7Lsweg7s8wALAP13ST9vkiIdcMOuNB2mvq7rTBSqycG4BGJ56Z25SbW6xFdR4KfGa96BuV05msl0nkHYz+w+QBxEL+2wTTocwfBoixRV/gr/Rh3C5PCflV9yLuqSMgENwZay8Zwd5aRmfD909sdM66mzGthJU5MotJePGL5EzUkU=
addons:
  hosts:
  - myshorthost
  hostname: myshorthost
  coverity_scan:
    project:
      name: GraphWalker/graphwalker-project
      description: Build submitted via Travis CI
    notification_email: nils.olsson@arcticblue.se
    build_command: mvn clean compile -DskipTests=true
    branch_pattern: coverity_scan
before_install:
- pip install --user codecov
install:
- sudo apt-get update -qq
script:
- if [ "${COVERITY_SCAN_BRANCH}" != 1 ]; then if [ "${TRAVIS_PULL_REQUEST}" = "false"];
  then mvn clean deploy --settings deploy.xml; else mvn clean package; fi fi
after_success:
- codecov
before_deploy:
- export TRAVIS_TAG="LATEST-BUILDS"
- git config --local user.name "$USER_NAME"
- git config --local user.email "$USER_EMAIL"
- git tag --force "$TRAVIS_TAG" "$TRAVIS_COMMIT"
- git push --force --tags
deploy:
  provider: releases
  api_key:
    secure: N1NZGwX9/Hrm7Qs3BP4AJ1HnUr7rydL+vd4e9rW6ISs6M6acUShxIMLFsxTXrYblsfDYCQ81r7S4tRENYXjvXwZjQGSyBmkkY1WQuQhl4QV4eepCy5i/yp7m15P7CZHkeqg5XSJteST4rpaz9oxrBCRYyVGArZUlQcWYnpUbmB0=
  tag_name: $TRAVIS_TAG
  target_commitish: "$TRAVIS_COMMIT"
  draft: false
  file:
  - graphwalker-cli/target/graphwalker-cli-4.0.0-SNAPSHOT.jar
  - graphwalker-studio/target/graphwalker-studio-4.0.0-SNAPSHOT.jar
  overwrite: true
  skip_cleanup: true
